const requeteUsers=fetch("innovations.json"),url=window.location.search,detailUrl=url.split("="),titre=document.getElementById("Nom-innovation"),desc=document.getElementById("description"),categ=document.getElementById("categorie"),artic=document.getElementById("texte"),img=document.getElementById("apercu"),entrep=document.getElementById("entreprise"),adRue=document.getElementById("adresseRue"),adLoc=document.getElementById("localite"),adPays=document.getElementById("pays"),mail=document.getElementById("mail"),gsm=document.getElementById("gsm"),site=document.getElementById("site"),gdImg=document.getElementById("gdImg"),nomInnovationPop=document.querySelector("#nomInnovation");var i=0,nbId=0;function choixPhoto(e,t,o){const n=document.querySelectorAll(".rond");e.classList.add("noshowrapide"),setTimeout(function(){e.src=o[t].src,e.alt=o[t].alt,e.title=o[t].titre,e.classList.remove("noshowrapide"),e.classList.add("show")},500);for(let e=0;e<n.length;e++)n[e].classList.contains("rondSelected")&&n[e].classList.remove("rondSelected");n[t].classList.add("rondSelected")}function gdImage(e){console.log(e.target.src)}detailUrl[1]||window.location.replace(window.location+"?id=1"),requeteUsers.then(function(e){return e.json()}).then(function(e){for(;i<e.length;i++)if(detailUrl[1]==e[i].id){nbId=e.length,titre.innerHTML=e[i].innovation,nomInnovationPop.innerHTML=e[i].innovation,document.title="SIW: "+e[i].innovation,desc.innerHTML=e[i].description,categ.innerHTML=e[i].categorie,artic.innerHTML=e[i].article,img.src=e[i].photos[0].src,metadesc=e[i].description,document.querySelector('meta[name="description"]').setAttribute("content",metadesc),img.alt=e[i].photos[0].alt,img.title=e[i].photos[0].titre;var t=e[i].photos;for(let e=0;e<t.length;e++){const e=document.createElement("div");e.classList.add("rond"),document.querySelector("#groupeRonds").appendChild(e)}const o=document.querySelectorAll(".rond");for(let e=0;e<o.length;e++)o[e].addEventListener("click",function(o){choixPhoto(img,e,t)});o[0].classList.add("rondSelected"),entrep.innerHTML=e[i].entreprise+"</br></br>"+e[i].innovateur+"</br>",adRue.innerHTML=e[i].rue,adLoc.innerHTML=e[i].localite,adPays.innerHTML=e[i].pays,mail.innerHTML=e[i].mail,gsm.innerHTML=e[i].telephone,site.innerHTML=e[i].site}}),img.addEventListener("click",gdImage);const heartIcon=document.querySelector(".heartIcon"),popupVote=document.querySelector(".popupVote"),fermerNewsletter=document.querySelector(".IconCroixFermer"),checkvote=document.getElementById("votecheck");function ouvertureVote(){popupVote.style="display:block;"}function fermerpopUpVote(){popupVote.classList.add("noshowrapide"),setTimeout(function(){popupVote.style="display:none;",popupVote.classList.remove("noshowrapide")},400)}heartIcon.addEventListener("click",ouvertureVote),fermerNewsletter.addEventListener("click",fermerpopUpVote);const VoteButton=document.querySelector("#VoteButton"),Voteid=document.querySelector("#Voteid"),checkboxvoter=document.querySelector("#checkboxvoter");function votefunction(){Voteid.value.includes("@")&&checkvote.checked&&(Voteid.value="",Voteid.placeholder="Votre vote a bien été pris en compte!",checkboxvoter.style="color:#004181;"),checkvote.checked||(console.log("non"),checkboxvoter.style="color:red;"),Voteid.value&&Voteid.value.includes("@")||(Voteid.placeholder="Entrez une adresse mail valide")}VoteButton.addEventListener("click",votefunction),console.log(i);var urltotale=window.location.href,urltotalesplitee=urltotale.split("?id=");function idSuivant(){var e=Number(urltotalesplitee[1])+1;e>nbId?window.location.replace("innovations.html"):window.location.replace(urltotalesplitee[0]+"?id="+e)}function idPrec(){var e=Number(urltotalesplitee[1])-1;e<=0?window.location.replace("innovations.html"):window.location.replace(urltotalesplitee[0]+"?id="+e)}const outilrecherche=document.querySelector("#search_SVG"),searchInput=document.querySelector(".searchInput");function barreDeRechercheApparait(){searchInput.classList.contains("invisibleSearch")?searchInput.classList.remove("invisibleSearch"):(searchInput.classList.remove("slidesearch"),searchInput.classList.add("noslidesearch"),setTimeout(function(){searchInput.classList.add("slidesearch"),searchInput.classList.remove("noslidesearch"),searchInput.classList.add("invisibleSearch")},500))}outilrecherche.addEventListener("click",barreDeRechercheApparait),searchInput.addEventListener("keyup",function(e){13===e.keyCode&&(e.preventDefault(),window.location.replace("resultat-de-recherche.html"))});var formulaireNom=document.getElementById("Nameid"),formulaireMail=document.getElementById("Mailid"),formulaireMessage=document.getElementById("Commentid"),bouttonEnvoyer=document.getElementById("formulaireEnvoyer");function envoyerLeMessage(e){e.preventDefault(),formulaireMail.value.includes("@")&&formulaireMessage.value?(formulaireNom.value="",formulaireMessage.value="",formulaireMessage.placeholder="Votre message a bien été envoyé!",formulaireMail.placeholder=formulaireMail.value,formulaireMail.value=""):(formulaireMessage.value||(formulaireMessage.placeholder="Vous n'avez pas écrit de message."),formulaireMail.value&&formulaireMail.value.includes("@")||(formulaireMail.value="",formulaireMail.placeholder="Entrez une adresse mail valide"))}bouttonEnvoyer.addEventListener("click",envoyerLeMessage);const fermerNewsletter2=document.querySelector(".IconCroixFermer2"),popupNewsletter=document.querySelector(".popupNewsletter"),bouttonNewsletterinscription=document.querySelector(".bouttonNewsletterinscription"),newsletterInscription=document.querySelector("#newsletterInscription"),Newsletterid=document.querySelector("#Newsletterid"),checkboxNewsletter=document.querySelector("#checkboxNewsletter");function ouvrirpopUpNews(){popupNewsletter.style="display:block;"}function fermerpopUpNews2(){popupNewsletter.classList.add("noshowrapide"),setTimeout(function(){popupNewsletter.style="display:none;",popupNewsletter.classList.remove("noshowrapide")},500)}bouttonNewsletterinscription.addEventListener("click",ouvrirpopUpNews),fermerNewsletter2.addEventListener("click",fermerpopUpNews2),newsletterInscription.addEventListener("click",inscrireAlaNewsLetter);const newsid=document.querySelector("#abonnement");function inscrireAlaNewsLetter(){1==newsid.checked?Newsletterid.value.includes("@")?(Newsletterid.value="",Newsletterid.placeholder="Vous êtes inscrit!",checkboxNewsletter.style="color:#004181;",newsid.checked=!1):Newsletterid.placeholder="Entrez une adresse mail valide":0==newsid.checked&&(checkboxNewsletter.style="color:red;",Newsletterid.value.includes("@")||(Newsletterid.placeholder="Entrez une adresse mail valide"))}
